# Chapter10 — 存储和文件结构
## 10.5 文件组织
1. 一个**文件**是在逻辑上组织成为记录的一个序列。
2. 每个文件分成定长的存储单元，称为**块**。

### 10.5.1 定长记录
1. 在一个块中之分配它能完整容纳下的最大记录数。
2. 在文件开始处，分配一定数量的字节作为**文件头**。文件头包含有关文件的各种信息，用链表存储被删除记录，文件头处存放链表头，该链表称为**空闲列表**。

### 10.5.3 变长记录
1. 变长记录以下面几种方式出现在数据库系统中：
    
    - 多种记录类型在一个文件中存储。
    - 允许一个或多个字段是变长的记录类型。
    - 允许可重复字段的记录类型，如数组和多重集。

2. 变长记录必须解决的两个问题：

    - 如何描述一条记录，使得单个属性可以轻松抽取。
    - 在块中如何存储变长记录，使得块中的记录可以轻松抽取。

## 10.6 文件中记录的组织
1. 文件组织记录的几种可能的方法：

    - **堆文件组织**：一条记录可以放在文件中的任何地方，记录之间没有顺序。通常每个记录使用一个单独的文件。
    - **顺序文件组织**：记录根据其"搜索码"的值的顺序存储。
    - **散列文件组织**：在每条记录的某些属性上计算一个散列函数，散列函数的结果决定记录应该放在哪个块中。

### 10.6.1 顺序文件记录
1. **顺序文件**是为了给高效处理按某个搜索码的顺序排序的记录而设计的。
2. **搜索码**是任何一个属性或者属性的集合。
3. 通过指针把记录链接起来，每一个记录的指针指向按搜索码顺序排列的下一条记录。
4. 插入操作规则如下：

    - 在文件中定位按搜索码书序处于待插入记录的前一条记录。
    - 如果该记录所在快中有一条空闲记录，则插入新的记录在该位置，否则插入到一个*溢出块*中，然后修改指针。

5. 溢出块会导致搜索码顺序和物理顺序的不一致性，会影响搜索效率，所以应该要**重组**，但重组的代价比较大，所以必须在系统负载低的时候执行。

## 10.7 数据字典存储
1. 关系数据库本身需要维护关于关系的数据，比如关系的模式等，这种关于数据的数据称为**元数据**。
2. 关于关系的关系模式和其他元数据存储在称为**数据字典**或**系统目录**的结构中。
